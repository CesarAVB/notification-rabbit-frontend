<div class="pf-card">
  <div class="pf-header">
    <i class="fas fa-paper-plane"></i>
    <span>Publicar Mensagem</span>
  </div>

  <div class="pf-body">
    <!-- Alertas -->
    <div *ngIf="showSuccess" class="pf-alert pf-alert-success fade-up">
      <i class="fas fa-check-circle me-2"></i>{{ successMessage }}
      <button class="pf-alert-close" (click)="showSuccess = false">&#x2715;</button>
    </div>
    <div *ngIf="showError" class="pf-alert pf-alert-danger fade-up">
      <i class="fas fa-exclamation-circle me-2"></i>{{ errorMessage }}
      <button class="pf-alert-close" (click)="showError = false">&#x2715;</button>
    </div>

    <!-- Tipo de Publicação -->
    <div class="field-group">
      <label class="field-label">Tipo de Publicação</label>
      <div class="mode-selector">
        <label class="mode-option" [class.active]="publishMode === 'exchange'">
          <input type="radio" name="mode" value="exchange" [(ngModel)]="publishMode">
          <i class="fas fa-exchange-alt"></i> Exchange
        </label>
        <label class="mode-option" [class.active]="publishMode === 'queue'">
          <input type="radio" name="mode" value="queue" [(ngModel)]="publishMode">
          <i class="fas fa-layer-group"></i> Queue
        </label>
      </div>
    </div>

    <!-- Exchange -->
    <div *ngIf="publishMode === 'exchange'" class="field-row fade-up">
      <div class="field-group">
        <label class="field-label">Exchange</label>
        <input type="text" class="form-control" [(ngModel)]="exchange" placeholder="notification-exchange">
      </div>
      <div class="field-group">
        <label class="field-label">Routing Key</label>
        <input type="text" class="form-control" [(ngModel)]="routingKey" placeholder="notification.email">
        <span class="field-hint">Wildcards: <code>*</code> (uma palavra) ou <code>#</code> (zero ou mais)</span>
      </div>
    </div>

    <!-- Queue -->
    <div *ngIf="publishMode === 'queue'" class="field-group fade-up">
      <label class="field-label">Queue</label>
      <input type="text" class="form-control" [(ngModel)]="queue" placeholder="notification-queue">
    </div>

    <!-- Mensagem -->
    <div class="field-group">
      <label class="field-label">Mensagem</label>
      <textarea class="form-control" rows="5" [(ngModel)]="message" placeholder="Escreva o conteúdo da mensagem..."></textarea>
    </div>

    <!-- Content Type -->
    <div class="field-group">
      <label class="field-label">Content Type</label>
      <select class="form-select" [(ngModel)]="contentType">
        <option value="application/json">application/json</option>
        <option value="text/plain">text/plain</option>
        <option value="application/xml">application/xml</option>
      </select>
    </div>

    <!-- Ações -->
    <div class="pf-actions">
      <button class="btn btn-outline-secondary" (click)="resetForm()" [disabled]="isLoading">
        Limpar
      </button>
      <button class="btn btn-primary" (click)="publishMessage()" [disabled]="isLoading">
        <i class="fas fa-paper-plane me-1"></i>
        {{ isLoading ? 'Publicando...' : 'Publicar' }}
      </button>
    </div>

    <!-- ID da Mensagem -->
    <div *ngIf="messageId" class="message-id-box fade-up">
      <span class="message-id-label">ID da mensagem</span>
      <div class="d-flex align-items-center justify-content-between gap-2">
        <code class="text-break message-id-code">{{ messageId }}</code>
        <button class="btn btn-sm btn-outline-secondary flex-shrink-0" (click)="copyMessageId()" title="Copiar">
          <i class="fas fa-copy"></i>
        </button>
      </div>
    </div>
  </div>
</div>